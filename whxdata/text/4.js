rh._.exports({"0":[["n_udld"]],"1":[[" ","2    ","Configuring UDLD","UniDirectional Link Detection (UDLD) is a protocol for detecting and disabling unidirectional Ethernet fiber or copper links caused by mis-wiring of fiber strands, interface malfunctions, media converter faults, and so on. The UDLD protocol operates at Layer 2 in conjunction with the IEEE 802.3 - Layer 1 fault detection mechanisms.","UDLD is a lightweight protocol that can be used to detect and disable one-way connections before they create dangerous situations such as Spanning Tree loops or other protocol malfunctions. The protocol is mainly used to advertise the identities of all the UDLD-capable devices attached to the same LAN segment and to collect the information received on the ports of each device to determine whether or not the Layer 2 communication is functioning properly. All connected devices must support UDLD for the protocol to successfully identify and disable unidirectional links. When UDLD detects a unidirectional link, the protocol administratively shuts down the affected port and generates a trap to alert the user. ","In This Chapter","This chapter describes how to configure UDLD parameters through the Command Line Interface (CLI). CLI commands are used in the configuration examples; for more details about the syntax of commands, see the ","OmniSwitch AOS Release 8 CLI Reference Guide",".","Configuration procedures described in this chapter include the following: ","•    ","“Configuring UDLD” on page 2-6",".","•    ","“Configuring the Operational Mode” on page 2-7",".","•    ","“Configuring the Probe-Timer” on page 2-7",".","•    ","“Configuring the Echo-Wait-Timer” on page 2-7",". ","•    ","“Clearing UDLD Statistics” on page 2-8",".","•    ","“Verifying the UDLD Configuration” on page 2-8",".","•    ","“Verifying the UDLD Configuration” on page 2-8",".","UDLD ","Defaults ","Parameter Description","Command","Default","UDLD administrative state","udld","Disabled","UDLD status of a port","udld port","Disabled","UDLD operational mode","udld mode","Normal","Probe-message advertisement timer","udld probe-timer","15 seconds","Echo-based detection timer","udld echo-wait-timer","8 seconds","Quick ","Steps for Configuring UDLD","1    ","To enable the UDLD protocol on a switch, use the ","udld"," command",". For example:","-> udld enable","2    ","To enable the UDLD protocol on a port, use the ","udld port"," command by entering ","udld port",", followed by ","the slot and port number, and ","enable",". For example:","-> udld port 1/6 enable","3    ","Configure the operational mode of UDLD ","by entering ","udld port",", followed by ","the slot and port number, ","mode",", and the operational mode. For example:","-> udld port 1/6 mode aggressive","4    ","Configure the probe-message advertisement timer on port 6 of slot 1 as 17 seconds using the following command:","-> udld port 1/6 probe-timer 17","Note.  ","Optional",". Verify the UDLD global configuration by entering the ","show udld configuration"," command ","or verify the UDLD configuration on a port by entering the ","show udld configuration port"," ","command. For example:","-> show udld configuration","Global UDLD Status : Disabled","-> show udld configuration port 1/6","Global UDLD Status: enabled","Port UDLD Status: enabled","Port UDLD State: bidirectional   ","UDLD Op-Mode: normal","Probe Timer (Sec): 20,","Echo-Wait Timer (Sec): 10","To verify the UDLD statistics of a port, use the ","show udld statistics port"," ","command. For example:","-> show udld statistics port 1/42","UDLD Port Statistics"," Hello Packet Send        :8,"," Echo Packet Send         :8,"," Flush Packet Recvd       :0","UDLD Neighbor Statistics"," Neighbor ID    Hello Pkts Recv       Echo Pkts Recv","--------------+--------------------+--------------","      1              8               15","      2              8               15","      3              8               21","      4              8               14","      5              8               15","      6              8               20","UDLD ","Overview","UDLD is a Layer 2 protocol used to examine the physical configuration connected through fiber-optic or twisted-pair Ethernet cables. When a port is affected and only a unidirectional link is working, UDLD detects and administratively shuts down the affected port, and alerts the user. Unidirectional links can create"," ","hazardous situations such as Spanning-Tree topology loops caused, for instance, by unwiring of fiber strands, interface malfunctions, faults of the media converter, and so on.","The UDLD feature is supported on the following port types:","•    ","Copper ports","•    ","Fiber ports ","UDLD Operational Mode","UDLD supports two modes of operation: ","•    ","Normal mode","•    ","Aggressive mode ","UDLD works with the Layer 1 mechanisms to determine the physical status of a link. A unidirectional link occurs whenever the traffic sent from a local device is received by its neighbor; but the traffic from the neighbor is not received by the local device.","Normal Mode","In this mode, the protocol depends"," ","on explicit information instead of implicit information. If the protocol is unable to retrieve any explicit information, the port is not put in the shutdown state; instead, it is marked as ","Undetermined",". The port is put in the shutdown state only when:","•    ","It is explicitly determined that the link is defective ","•    ","When it is determined on the basis of UDLD-PDU processing that link has become unidirectional. ","In any such state transition, a trap is raised.","Aggressive Mode","In this mode, UDLD checks whether the connections are correct and the traffic is flowing bidirectionally between the respective"," ","neighbors. The loss of communication with the neighbor is considered an event to put the port in shutdown state. Thus, if the UDLD PDUs are not received before the expiry of a timer, the port is put in the ","UDLD-shutdown"," state. Since the lack of information is not always due to a defective link, this mode is optional and is recommended only for point-to-point links. ","UDLD shuts down the affected interface when one of these problems ","occurs",": ","•    ","On fiber-optic or twisted-pair links, one of the interfaces cannot send or receive traffic. ","•    ","On fiber-optic or twisted-pair links, one of the interfaces is down while the other is up. ","•    ","One of the fiber strands in the cable is disconnected. ","Mechanisms to Detect Unidirectional Links","The UDLD protocol is"," ","implemented to correct"," ","certain assumptions made by other protocols and to help the Spanning Tree Protocol to function properly to avoid dangerous Layer 2 loops.","UDLD uses two basic mechanisms:","•    ","It advertises the identity of a port and learns about its neighbors. This information about the neighbors is maintained in a cache table.","•    ","It sends continuous echo messages in certain circumstances that require fast notifications or fast re-synchronization of the cached information.","Neighbor database maintenance ","UDLD learns about other UDLD neighbors by periodically sending a Hello packet (also called an advertisement or probe) on every active interface ","to inform each device about its neighbors."," ","When the switch receives a Hello message, the switch caches the information until the age time expires. If the switch receives a new Hello message before ","the aging of a","n older cache entry, the switch replaces the older entry with the new one. ","Whenever an interface is disabled and UDLD is running, ","or"," ","UDLD is disabled on an interface, or the switch is reset, UDLD clears all the existing cache entries for the interfaces that are affected by the"," ","configuration change. UDLD sends ","a"," ","message to the neighbors to flush the part of their caches affected by the status change. This UDLD message is intended ","to synchronize the caches. ","Echo detection","UDLD ","depends"," on an echo-detection mechanism. UDLD restarts the detection window on its side of the connection and sends echo message","s in response to the request, w","henever a UDLD device learns about a new neighbor or receives a re-synchronization request from an out-of-sync neighbor."," ","This behavior is the same on all UDLD neighbors because the sender of the echoes expects to receive an echo"," as a response. ","If the detection window ends and no valid response is received, the link is shut down, depending on the UDLD mode. When UDLD is in normal mode, the link ","is"," ","considered ","to be undetermined"," and ","is not ","shut down. When UDLD is in aggressive mode, the link is considered ","to be ","unidirectional, and the interface is shut down. ","In normal mode, if UDLD is in the advertisement or in the detection phase and all the neighbor cache entries are aged out, UDLD restarts the link-up sequence to re-synchronize with potentially out-of-sync neighbors. ","In aggressive mode, if UDLD is in the advertisement or in the detection phase and all the nei","ghbors of a po","rt are aged out, UDLD restarts the link-up sequence to re-synchronize with potentially out-of-sync neighbors. UDLD s","huts down the port, after the continuous m","essages, if the"," link state is undetermined. ","Configuring UDLD","This section describes how to use Command Line Interface (CLI) commands to do the following:","•    ","“Enabling and Disabling UDLD” on page 2-6",".","•    ","“Configuring the Operational Mode” on page 2-7",".","•    ","“Configuring the Probe-Timer” on page 2-7",".","•    ","“Configuring the Echo-Wait-Timer” on page 2-7",".","•    ","“Clearing UDLD Statistics” on page 2-8",".","•    ","“Verifying the UDLD Configuration” on page 2-8",".","Note.  ","See the “UDLD Commands” chapter in the ","OmniSwitch AOS Release 8 CLI Reference Guide"," ","for complete documentation of UDLD CLI commands.","Enabling and Disabling UDLD","By default, UDLD is disabled on all switch ports. To enable UDLD on a switch, use the ","udld"," command. For example, the following command enables UDLD on a switch:","-> udld enable","To ","disable UDLD on a switch, use the ","udld"," command with the ","disable"," parameter. For example, the following command disables UDLD on a switch:","-> udld disable","Enabling UDLD on a Port","By default, UDLD is disabled on all switch ports. To enable UDLD on a port, use the ","udld port"," command. For example, the following command enables UDLD on port 3 of slot 1:","-> udld port 1/3 enable","To ","enable UDLD on multiple ports, specify a range of ports. For example:","-> udld port 1/6-10 enable","To ","disable UDLD on a port, use the ","udld port ","command with the ","disable"," parameter. For example, the following command disables UDLD on a range of ports:","-> udld port 5/21-24 disable","Configuring the Operational Mode","To configure the operational mode, use the ","udld mode"," command as shown:","-> udld mode aggressive","For example, to configure the mode for port 4 on slot 2, ","enter:","-> udld port 2/4 mode aggressive","To configure the mode for multiple ports, specify a range of ports. For example:","-> udld port 2/7-18 mode normal","Configuring the Probe-Timer","To configure the probe-message advertisement timer, use the ","udld probe-timer"," command as shown:","-> udld probe-timer 20","For example, to configure the probe-timer for port 3 on slot 6, ","enter:","-> udld port 6/3 probe-timer 18","To configure the probe-timer for multiple ports, specify a range of ports. For example:","-> udld port 1/8-21 probe-timer 18","Use the ","no"," form of this command to reset the timer. For example, the following command resets the timer for port 4 of slot 6:","-> no udld port 6/4 probe-timer","The following command resets the timer for multiple ports:","-> no udld port 1/8-21 probe-timer","Configuring the Echo-Wait-Timer","To configure the echo-based detection timer, use the ","udld echo-wait-timer"," command as shown:","-> udld echo-wait-timer 9","For example, to configure the echo-wait-timer for port 5 on slot 6, ","enter:","-> udld port 6/5 echo-wait-timer 12","To configure the echo-wait-timer for multiple ports, specify a range of ports. For example:","-> udld port 1/8-21 echo-wait-timer 9","Use the ","no"," form of this command to reset the timer. For example, the following command resets the timer for port 6 of slot 4:","-> no udld port 4/6 echo-wait-timer","The following command resets the timer for multiple ports:","-> no udld port 1/8-21 echo-wait-timer","Clearing UDLD Statistics","To clear the UDLD statistics, use the ","clear udld statistics port"," command. For example, to clear the statistics for port 4 on slot 1, ","enter:","-> clear udld statistics port 1/4","To clear the UDLD statistics on all the ports, enter:","-> clear udld statistics","Verifying the UDLD Configuration","To display UDLD configuration and statistics information, use the show commands listed below:","show udld configuration","Displays the global status of UDLD configuration.","show udld configuration port","Displays the configuration information for all UDLD ports or for a particular UDLD port on the switch.","show udld statistics port","Displays the UDLD statistics for a specific port.","show udld neighbor port","Displays the UDLD neighbor ports.","show udld status port","Displays the UDLD status for all ports or for a specific port.","For more information about the resulting display from these commands, see the ","OmniSwitch AOS Release 8 CLI Reference Guide",". An example of the output for the ","show udld configuration port ","and"," show udld statistics port ","commands is also given in ","“Quick Steps for Configuring UDLD” on page 2-3","."]],"id":"4"})